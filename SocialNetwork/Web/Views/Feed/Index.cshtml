@model Web.Models.FeedViewModel

@{
    ViewBag.Title = "Index";
}
<section>
    <div class="col-lg-7 meus-dados">
        <div class="image-perfil">
            <figure>
                <img src="@Model.MyUrlPhoto" alt="Foto de perfil" />
            </figure>
        </div>

        <ul class="list-group">
            <li class="list-group-item">@Model.MyName</li>
            <li class="list-group-item">Seguindo: @Model.Following</li>
            <li class="list-group-item">Seguidores: @Model.Followers</li>
        </ul>
    </div>
</section>
<section>
    <div class="col-lg-7">
        @using (Html.BeginForm("PostMensage", "Feed"))
        {
            @Html.AntiForgeryToken()
            <input type="hidden" id="MyName" name="MyName" value="@Model.MyName"/>
            <div class="form-group">
                <div class="col-md-10">
                    @Html.EditorFor(model => model.PostMensage, new { htmlAttributes = new { @class = "form-control" } })
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="Postar" class="btn btn-primary" />
                </div>
            </div>
        }
    </div>
    <div class="col-lg-7">
        @if (Model.Posts != null || Model.Posts.Count() > 0)
    {
        foreach (var p in Model.Posts)
        {
        <ul class="list-group">
            <li class="list-group-item">@p.Name</li>
            <li class="list-group-item">Postado: @p.DatePosted</li>
            <li class="list-group-item">Curtidas: @p.Like</li>
            <li class="list-group-item">@p.Mensage</li>
            @if (Session["session_id"].ToString().ToUpper().Equals(p.IdProfile.ToUpper()))
            {
                using (Html.BeginForm("Edit", "Feed"))
                {
                    @Html.AntiForgeryToken()
                    <input id="IdPost" name="IdPost" type="hidden" value="@p.IdPost" />
                    <input id="Name" name="Name" type="hidden" value="@p.Name" />
                    <input id="DatePosted" name="DatePosted" type="hidden" value="@p.DatePosted" />
                    <div class="form-group">
                        <div class="form-control">
                            <input type="text" id="Mensage" name="Mensage" value="@p.Mensage" required />
                            <input type="submit" class="btn btn-info" value="Editar" />
                        </div>
                    </div>
                }
            }
            @if (p.UrlImage != null)
            {
                <li class="list-group-item">
                    <img src="@p.UrlImage" style="width:200px;height:200px;" />
                </li>
            }
        </ul>
        }
    }
    else
    {
        <h3>Nenhuma postagem</h3>
    }
    </div>
</section>
